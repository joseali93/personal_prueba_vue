<template>
   <div>
     <preload v-show="load" ></preload>
     <nav class="side-navbar mCustomScrollbar _mCS_1 mCS_no_scrollbar">
            <div id="mCSB_1" class="mCustomScrollBox mCS-light mCSB_vertical mCSB_inside" style="max-height: none;" tabindex="0">
            <div id="mCSB_1_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px;" dir="ltr">
        <div class="side-navbar-wrapper">
            <div class="sidenav-header d-flex align-items-center justify-content-center">
            <div class="sidenav-header-inner text-center " >
              <b-link to="/inicio" >
                <b-img :src="imagen" fluid alt="Responsive image" 
                class="img-fluid   mCS_img_loaded"/>
                <!--
                <img src="src/assets/logo.png" alt="RLP" class="img-fluid rounded-circle mCS_img_loaded">
                -->
              </b-link>
            </div>
            <div class="sidenav-header-logo"><a  class="brand-small text-center"><b-link > <strong class="text-dark">W</strong><strong class="text-primary">L</strong></b-link></a></div>
            </div>
            <div class="main-menu">
            <ul id="side-main-menu" class="side-menu list-unstyled">                  
                <li>
                    <b-link to="/inicio/orden">
                        <i class="fa fa-plus-square-o"></i><span> Generacion Orden de Servicio </span>
                    </b-link>
                </li>
                <li> 
                    <b-link to="/inicio/consultar">
                        <i class="fa fa-briefcase"></i><span> Consultar Ordenes de Servicio </span>
                    </b-link>
                </li>
                <li> 
                    <b-link to="/inicio/trazabilidad">
                        <i class="fa fa-info"></i><span>Consulta Trazabilidad</span>
                    </b-link>
                </li>
                <li> 
                    <b-link to="/inicio/entradasalida">
                        <i class="fa fa-rebel"></i><span>Entradas y Salidas</span>
                    </b-link>
                </li>
            </ul>
            </div>

        </div>
        </div><div id="mCSB_1_scrollbar_vertical" class="mCSB_scrollTools mCSB_1_scrollbar mCS-light mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer">
            <div id="mCSB_1_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; height: 0px; top: 0px; display: block; max-height: 724.4px;"><div class="mCSB_dragger_bar" style="line-height: 30px;">

            </div>
        </div>
        <div class="mCSB_draggerRail">

        </div>
        </div>
        </div>
        </div>
    </nav>
    <div class="page home-page">
      <!-- navbar-->
      <header class="header">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
              <div class="navbar-header"><a id="toggle-btn" href="" class="menu-btn"><i class="icon-bars"> </i></a><a class="navbar-brand">
              <b-link to="/inicio">
                  <div class="brand-text d-none d-md-inline-block"><span> </span><strong class="text-primary"></strong></div></b-link></a></div>
              <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                <li class="nav-item">
                  <b-link variant="link" class="nav-link logout" @click="Salir()">
                    Logout
                    <i class="fa fa-sign-out"></i>
                  </b-link>

                </li>
               </ul>
            </div>
          </div>
        </nav>
      </header>
      <!-- Header Section-->
      <section class="dashboard-header section-padding">
        <div class="container-fluid">
           <div class="content-wrapper">
           

            <router-view
              v-bind:nombreusu="nombreusu">
            </router-view>
         </div>
        </div>
      </section>


      <footer class="main-footer">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-6">
              <p>WaySolutions Tecnology Â© 2017</p>
            </div>
            <div class="col-sm-6 text-right">
              <p>Design by <a href="http://www.waysolutions.co/" class="external">WaySolutions Tecnology</a></p>
              <!-- Please do not remove the backlink to us unless you support further theme's development at https://bootstrapious.com/donate. It is part of the license conditions. Thank you for understanding :)-->
            </div>
          </div>
        </div>
      </footer>
    </div>
   </div>
</template>

<script>
import Preload from "../componentes/preload.vue";
import {bus} from '../main'

export default {
  data() {
    return {
      nombreusu: "",
      load:'',
      imagen:'',
      
    };
  },
    updated: function () {
      //console.log("actualizamos en nav");
       bus.$on('load', function (userObject) {
     
        this.load = userObject.load

        //console.log(this.load);
      }.bind(this))
    },
  methods:{
    Salir(val){
      console.log("entro a salir");
      localStorage.clear();
      this.$router.replace('/')

    }
  },
  components: {
    Preload
  },
  mounted: function() {
    var test2 = localStorage.getItem("storedData");
    var test = JSON.parse(test2);
    this.nombreusu = test.nombre;
    this.imagen = test.url_logo
  },
  beforeCreate: function() {
    console.log("antes");
  }
};
</script>

<style>
nav.side-navbar .sidenav-header
{
background:white;  
}
nav.side-navbar .sidenav-header img{
  width: 100%;
  height: auto;  
}
imagen{
  width: 50px;
  height: 18.462px;
};
ul>li>a:hover{
  text-decoration: none;
};
.textb {
  color: white;
  font-size: 18px;
}
.menu {
  margin-top: 100px;
  padding: 5px;
}
.menu:hover {
  background-color: #aed6f1;
}
.navbar-custom {
  background-color: #024464;
}
.jumbotron {
  background-color: white;
}
.sidemenu {
  height: 900px;
}
.listado {
  padding-right: 0px;
}
.contenido {
  padding-left: 0px;
}
.logo {
  width: 15%;
  height: 15%;
}
</style>
